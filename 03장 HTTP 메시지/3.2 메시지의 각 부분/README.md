# 3.2 메시지의 각 부분

- HTTP 메시지는 단순한, 데이터의 구조화된 블록이다.
- 각 메시지는 클라이언트로부터의 요청이나 서버로부터의 응답 중 하나를 포함한다.
  - `시작줄`, `헤더 블록`, `본문` 으로 나뉘어짐
    - 시작줄 : 어떤 메시지인지 서술
    - 헤더 블록 : 메시지의 속성 서술
    - 본문 : 데이터 포함 / 본문 자체가 아예 없을 수도 있음

<br>

### 3.2.1 메시지 문법
**모든 HTTP 메시지는 요청 메시지나 응답 메시지로 분류된다.**
- 요청 메시지 : 웹 서버에 어떤 동작을 요구한다.
    > 요청 메시지의 형식
    > ```
    > <메서드> <요청 URL> <버전>
    > <헤더>
    > ㅤ
    > <엔터티 본문>
    ```

- 응답 메시지 : 요청의 결과를 클라이언트에게 돌려준다.
    > 응답 메시지의 형식
    >```
    ><버전> <상태 코드> <사유 구절>
    ><헤더>
    >ㅤ
    ><엔터티 본문>
    >```

- 설명
  - 메서드 : 클라이언트 측에서 서버가 리소스에 대해 수행해주길 바라는 동작(GET, POST 등)
  - 요청 URL : 요청 대상이 되는 리소스를 지칭하는 완전한 URL 혹은 URL의 경로 구성요소
  - 버전 : 이 메시지에서 사용 중인 HTTP의 버전
  - 상태 코드 : 요청 중에 무엇이 일어났는지 설명하는 세 자리의 숫자
  - 사유 구절 : 숫자로 된 상태 코드의 의미를 사람이 이해할 수 있게 설명해주는 짧은 문구
  - 헤더들 : 이름, 콜론(;), 선택적인 공백, 값, CRLF가 순서대로 나타나는 0개 이상의 헤더들
  - 엔터티 본문: 임의의 데이터 블록을 포함한다.

<br>

### 3.2.2 시작줄

**모든 HTTP 메시지는 시작줄로 시작한다.**

- 요청의 시작줄 : 무엇을 해야할지
  - `GET / HTTP/1.1`
- 응답의 시작줄 : 무슨 일이 일어났는지
  - `HTTP/1.1 200 OK`

말해준다.

### 요청줄
요청 메시지는 서버에게 리소스에 대해 무언가를 해달라고 부탁한다.
- 메서드, 요청 URL, HTTP 버전 을 담고 있다.
- 모든 필드는 공백으로 구분된다.

### 응답줄
수행 결과에 대한 상태 정보와 결과 데이터를 클라이언트에게 돌려준다.
- HTTP 버전, 상태 코드, 사유 구절을 담고 있다.
- 모든 필드는 공백으로 구분된다.

### 메서드
**요청의 시작줄은 메서드로 시작하며, 서버에게 무엇을 해야 하는지 말해준다.**
- GET: 서버에서 어떤 문서를 가져온다 (X)
- HEAD: 서버에서 어떤 문서에 대해 헤더만 가져온다 (X)
- POST: 서버가 처리해야 할 데이터를 보낸다
- PUT: 서버에 요청 메시지의 본문을 저장한다
- TRACE: 메시지가 프락시를 거쳐 서버에 도달하는 과정을 추적한다 (X)
- OPTIONS: 서버가 어떤 메서드를 수행할 수 있는지 확인한다 (X)
- DELETE: 서버에서 문서를 제거한다 (X)


### 상태 코드
- 클라이언트에게 무엇이 일어났는지 말해준다.
- 응답 메시지의 시작줄에 위치한다.
- 숫자로 된 코드와 문자열로 되어 있어서 사람이 이해하기 쉬운 메시지 두 형태 모두로 반환된다.
  - 100-199: 정보
  - 200-299: 성공
  - 300-399: 리다이렉션
  - 400-499: 클라이언트 에러
  - 500-599: 서버 에러


### 사유 구절
응답 시작줄의 마지막 구성요소로, 상태 코드에 대한 글로 된 설명이다.

### 버전 번호
HTTP/x.y 형식으로 요청과 응답 메시지 양쪽 모두에 기술되며, HTTP 애플리케이션들이 자신이 따르는 프로토콜의 버전을 상대방에게 말해주기 위한 수단이다.
* 애플리케이션이 지원하는 가장 높은 HTTP 버전을 가리킨다.
  

<br>

### 3.2.3 헤더
**HTTP 헤더 필드는 시작줄 다음 0개, 1개 혹은 여러개가 존재하며, 요청과 응답 메시지에 추가 정보를 더한다.**

### 헤더 분류
- **일반 헤더**
: 요청과 응답 양쪽 모두에 나타날 수 있음
- **요청 헤더**
: 요청에 대한 부가 정보 제공
- **응답 헤더**
: 응답에 대한 부가 정보 제공
- **Entity 헤더**
: 본문 크기와 콘텐츠, 혹은 리소스 그 자체를 서술
- **확장 헤더**
: 명세에 정의되지 않은 새로운 헤더

### 헤더를 여러 줄로 나누기
- 긴 헤더 줄은 여러 줄로 쪼개서 더 읽기 좋게 만들 수 있다.
- 추가 줄 앞에는 최소 하나의 스페이스 혹은 탭 문자가 와야한다.

<br>

### 3.2.4 엔터티 본문
HTTP가 수송하도록 설계된 것들로 이미지, 문서 등등의 데이터를 실어 나를 수 있다.
- 선택적으로 존재

<br>

### 3.2.5 버전 0.9 메시지
HTTP/0.9 메시지도 요청과 응답으로 이루어져 있지만, 요청은 그저 메서드와 요청 URL을 갖고 있을 뿐이며, 응답은 오직 엔터티로만 되어있다.